process FlavorHistory = {


  # initialize MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.threshold = "INFO"
  # return trigger report (including filter efficiencies)
  untracked PSet options = { untracked bool wantSummary = true }

  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
  include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidates.cfi"
  include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidates2GenParticles.cfi"
  include "PhysicsTools/HepMCCandAlgos/data/genEventWeight.cfi"
  include "PhysicsTools/HepMCCandAlgos/data/genEventScale.cfi"


  untracked PSet maxEvents = {
    untracked int32 input = 1
  }

  source = PoolSource {
    untracked vstring fileNames = { "" }
  }

replace PoolSource.fileNames = {
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/0C17400F-C52A-DD11-9996-001CC4BC4FC4.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/0E098D6C-C72A-DD11-A2DE-001CC47D5DA2.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/144B737F-C72A-DD11-A5CB-001E0B465C5C.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/543F7EBF-C52A-DD11-AB05-001CC4A63C8E.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/6A33D98C-C52A-DD11-9222-001CC47D5DA2.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/7C193857-C72A-DD11-93F5-001E0B464B68.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/887E58A7-C72A-DD11-B1B0-001E0B1C74DA.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/8CE563EE-AF2A-DD11-AE21-00E0814002AD.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/94B976C0-C62A-DD11-BE98-001CC4A66C28.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/9CB7D638-C52A-DD11-A47C-001CC4A68B8A.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/9EF3DAFE-C62A-DD11-9453-001E0B465712.root',
'/store/mc/2008/5/25/CSA07-Genwbbjjj-alpgen-1211716084/0004/C8E0DB4D-C92A-DD11-A964-001CC47B2696.root'
}

/*
replace PoolSource.fileNames = {
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/3E4063BC-2F2B-DD11-B695-001CC4A64DA6.root',
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/90D9FDE9-302B-DD11-9356-001CC47B1118.root',
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/941A209D-2F2B-DD11-9C2C-001CC47BCF5E.root',
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/9C396864-172B-DD11-99EB-001B7872928C.root',
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/BA8D1A8C-2F2B-DD11-BFE6-001CC4A6ABA8.root',
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/BC44E740-312B-DD11-BF2E-001CC47D5894.root',
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/D424355B-302B-DD11-A85A-001E0B465C8A.root',
'/store/mc/2008/5/25/CSA07-Genwccjjj-alpgen-1211716294/0004/DEE115F7-2D2B-DD11-A07A-001CC47BED6E.root'
}
*/


   module printList = ParticleListDrawer {
    InputTag src = genParticles
    untracked int32 maxEventsToPrint = 100
  }


  module flavorHistoryProducer = FlavorHistoryProducer {
     InputTag   src = genParticles
     int32      pdgIdToSelect = 4
     double     ptMinParticle = 0.0
     double     ptMinShower = 0.0
     double     etaMaxParticle = 4.0
     double     etaMaxShower = 4.0
     string     flavorHistoryName = "cpartonFlavorHistory"
     untracked bool verbose = true
  }


  path p = { 
    genParticles,
    genEventWeight,
    printList, 
    flavorHistoryProducer
  }

  # to only accept events passing the complete path
  block EventSelection = {
    untracked PSet SelectEvents = {
      vstring SelectEvents = { "p" }
    }
  }

  module out = PoolOutputModule {
    untracked string fileName = "genparticles.root"
    using EventSelection
    untracked vstring outputCommands = {
      "drop *",
      "keep *_genParticles_*_*",
      "keep *_flavorHistoryProducer_*_*"
    }
    untracked bool verbose = false
  }

  endpath o = { 
    out 
  }

}
