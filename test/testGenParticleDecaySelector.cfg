process CandSelection = {

  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi" 

  untracked PSet maxEvents = { untracked int32 input = 10 }

  source = PoolSource {
    untracked vstring fileNames = { "file:genevents.root" }
  }

  module zDecay = GenParticleDecaySelector {
    InputTag src = genParticles
    string particle = "Z0"
    int32 status = 3
  }

  module out = PoolOutputModule { 
    untracked string fileName = "selectedevents.root" 
    untracked vstring outputCommands = {
      "drop *",
      "keep *_genParticles_*_*",
      "keep *_zDecay_*_*"
    }  
  }

  module printEventNumber = AsciiOutputModule { 
  }

  path p = { 
    zDecay
  }

  endpath o = { 
    out, printEventNumber 
  }
}
