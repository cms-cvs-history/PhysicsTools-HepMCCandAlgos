process MCCand = {

include "FWCore/MessageLogger/data/MessageLogger.cfi"
include "IOMC/GeneratorInterface/data/PythiaSourceMinBias.cfi"
include "PhysicsTools/HepMCCandAlgos/data/genCandidates.cfi"
include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidates.cfi"
include "PhysicsTools/HepMCCandAlgos/data/setMotherReferences.cfi"
#replace genParticleCandidates.verbose = true
#replace genParticleCandidates.ptMinNeutral = -1
#replace genParticleCandidates.ptMinCharged = -1

  source = PoolSource {
    # read FEVT file
    untracked vstring fileNames = { "file:events.root" }
    untracked int32 maxEvents = 50
  }

  module out = PoolOutputModule { 
    untracked string fileName = "gen.root" 
    untracked vstring outputCommands = {
      "drop *",
      "keep edmHepMCProduct_VtxSmeared_*_*",
      "keep *_genCandidates_*_*",
      "keep *_genParticleCandidates_*_*"
    }  
  }

  module printTree = ParticleTreeDrawer {
    InputTag src = genParticleCandidates
#    untracked bool printP4 = true
#    untracked bool printPtEtaPhi = true
  }	

  module printEventNumber = AsciiOutputModule { }

  path p = { genCandidates, genParticleCandidates, setMotherReferences, printTree }
  endpath o = { out, printEventNumber }
}
